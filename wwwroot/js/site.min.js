"use strict";var app=angular.module("notesApp",["ngAnimate","ui.bootstrap"]),baseUrl="/";app.factory("NotesService",["$http",function(e){var r={};return r.GetNotes=function(r){return e.get(baseUrl+"api/notes",{params:r})},r.PostNotes=function(r){return e.post(baseUrl+"api/notes",r)},r.PutNotes=function(r){return e.put(baseUrl+"api/notes",r)},r.DeleteNotes=function(r){return e["delete"](baseUrl+"api/notes/"+r)},r}]),app.controller("NotesController",["$scope","NotesService",function(e,r){function t(){e.spinner="spinner",e.users=null,r.GetNotes(e.paging).success(function(r){e.notes=r.Results,e.paging.TotalCount=r.TotalCount,e.spinner=""}).error(function(r){e.errormessage=null==r?"Impossible to reach the server":void 0!=r.MessageDetail?r.MessageDetail:"Generic error",e.errortype="alert-danger",e.spinner=""})}e.paging={PageNumber:1,PageSize:10,SortBy:"Date",SortDirection:!1,TotalCount:0},t(),e.errormessage="",e.sort=function(r){r===e.paging.SortBy?e.paging.SortDirection=!e.paging.SortDirection:(e.paging.SortBy=r,e.paging.SortDirection=!1),e.paging.PageNumber=1,t()},e.setPage=function(r){e.paging.PageNumber=r},e.pageChanged=function(){t()},e.formData={},e.editor={add:!1,edit:!1},e.addnew=function(){e.formData={},e.editor.add=!0},e.processAddNewForm=function(){e.spinner="spinner",r.PostNotes(e.formData).success(function(r){e.errormessage="Note added succesfully",e.errortype="alert-success",e.formData={},e.editor.add=!1,t()}).error(function(r){e.errormessage=null==r?"Impossible to reach the server":void 0!=r.ModelState["note.Description"]?r.ModelState["note.Description"][0]:void 0!=r.Message?r.Message:"API Error",e.errortype="alert-danger",e.spinner=""})},e["delete"]=function(o){e.editor.add=!1,e.editor.edit=!1,r.DeleteNotes(o).success(function(r){e.errormessage="Note deleted succesfully",e.errortype="alert-success",e.formData={},t()}).error(function(r){e.errormessage=e.errormessage=null==r?"Impossible to reach the server":void 0!=r.ModelState["note.Description"]?r.ModelState["note.Description"][0]:void 0!=r.Message?r.Message:"API Error",e.errortype="alert-danger"})},e.edit=function(o){e.editor.add=!1,e.editor.edit=!0,r.DeleteNotes(o).success(function(r){e.errormessage="Note updated succesfully",e.errortype="alert-success",e.formData={},t()}).error(function(r){e.errormessage=e.errormessage=null==r?"Impossible to reach the server":void 0!=r.ModelState["note.Description"]?r.ModelState["note.Description"][0]:void 0!=r.Message?r.Message:"API Error",e.errortype="alert-danger"})}}]);